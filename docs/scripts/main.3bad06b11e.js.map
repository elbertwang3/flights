{"version":3,"sources":["webpack:///./app/scripts/utils/load-script.js","webpack:///./app/scripts/embeds/pym.js","webpack:///./app/scripts/map.js","webpack:///./app/scripts/packs/main.js","webpack:///./app/scripts/utils/debounce.js","webpack:///./config/polyfills/classlist.js","webpack:///./config/legacy-polyfills.js"],"names":["loadScript","url","Promise","resolve","reject","script","document","createElement","src","async","onload","onerror","body","appendChild","PYM_SRC_URL","d3","prototype","map","options","charts","this","nodes","el","$sel","data","datum","usairports","forEach","d","incoming","outgoing","flights","iata","Map","IATA","usroutes","route","source","get","ORIGIN","target","DEST","COUPONS","airportsgeojson","airport","type","properties","geometry","coordinates","Longitude","Latitude","width","height","radiusScale","$svg","airports","voronoiLayer","canvas","context","projection","canvasPath","svgPath","polygons","geoVoronoi","line","curve","x","y","Chart","init","$g","append","node","getContext","attr","concat","resize","render","offsetWidth","offsetHeight","Math","sqrt","outgoingMax","domain","range","scale","translate","coords","clearRect","beginPath","topojson","mapData","objects","states","fillStyle","fill","a","b","lineWidth","strokeStyle","stroke","selectAll","join","each","bubble","features","on","site","classed","raise","OPERATING_CARRIER","push","val","arguments","length","pop","container","select","clearContainer","html","getFrameWidth","routes","origins","console","log","fn","destinations","mapChart","carrier","origin","destination","selectedRoutes","possibleOrigins","possibleDestinations","possibleAirports","blankAirport","Name","City","renderGraphic","pymChild","window","addEventListener","debounce","$return","$error","debouncedFn","then","$await_1","pym","Child","$boundEx","$await_2","func","sendHeight","wait","later","last","Date","now","timestamp","timeout","setTimeout","immediate","result","apply","args","callNow","catch","error","cardDropdown","getElementById","carrierDropdown","originDropdown","destinationDropdown","event","value","filter","Object","toConsumableArray","Set","includes","enter","text","update","exit","remove","self","createElementNS","view","elemCtrProto","Element","objCtr","strTrim","String","trim","replace","arrIndexOf","Array","indexOf","item","i","len","DOMEx","message","name","code","DOMException","checkTokenAndGetIndex","classList","token","test","call","ClassList","elem","trimmedClasses","getAttribute","classes","split","_updateClassName","setAttribute","toString","classListProto","classListGetter","Error","contains","add","tokens","l","updated","index","splice","toggle","force","method","replacement_token","defineProperty","classListPropDesc","enumerable","configurable","ex","undefined","number","__defineGetter__","testElement","createMethod","original","DOMTokenList","_toggle","slice","require","default","assign"],"mappings":"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","file":"main.3bad06b11e.js","sourcesContent":["/**\n * A helper for asynchronously loading scripts.\n *\n * Provides a Promise interface for passing a function that will only be called\n * if the script is successfully added to the page.\n *\n * @private\n * @param {String} url The URL for the script to be loaded.\n * @returns {Promise}\n * @example\n *\n * loadScript('backup.js').then(() => {\n *   // anything that depends on that script loading\n * });\n */\nfunction loadScript(url) {\n  return new Promise((resolve, reject) => {\n    // create the `script` element\n    const script = document.createElement('script');\n\n    // set its URL\n    script.src = url;\n\n    // should always be async\n    script.async = true;\n\n    // resolve the Promise on load\n    script.onload = resolve;\n\n    // reject the Promise if there is an error\n    script.onerror = reject;\n\n    // attach the script to the document body\n    document.body.appendChild(script);\n  });\n}\n\nexport default loadScript;\n","/* global pym */\n\n// local\nimport debounce from '../utils/debounce';\nimport loadScript from '../utils/load-script';\n\nconst PYM_SRC_URL = 'https://pym.nprapps.org/pym.v1.min.js';\n\n/**\n * Load the Pym.js script and return a new instance of pym.Child.\n *\n * @returns {Promise<object>}\n */\nasync function getPymChild() {\n  await loadScript(PYM_SRC_URL);\n\n  return new pym.Child();\n}\n\n/**\n * A wrapper around loading Pym.js async and hooking up the callback\n * function, if provided.\n *\n * @param {Function} [fn] an optional render function to be hooked into Pym.js\n * @returns {Promise<void>}\n */\nexport async function pymLoader(fn) {\n  const pymChild = await getPymChild();\n\n  if (fn) {\n    const debouncedFn = debounce(() => {\n      fn();\n\n      pymChild.sendHeight();\n    }, 300);\n\n    window.addEventListener('resize', debouncedFn);\n    window.addEventListener('load', debouncedFn);\n\n    debouncedFn();\n  }\n}\n","/*\n USAGE (example: line chart)\n 1. c+p this template to a new file (line.js)\n 2. change puddingChartName to puddingChartLine\n 3. in graphic file: import './pudding-chart/line'\n 4a. const charts = d3.selectAll('.thing').data(data).puddingChartLine();\n 4b. const chart = d3.select('.thing').datum(datum).puddingChartLine();\n*/\nimport * as d3 from 'd3';\nimport mapData from '../../data/map.json';\n//import routeData from '../data/routes.json';\nimport { geoVoronoi } from 'd3-geo-voronoi';\nimport * as topojson from 'topojson';\nimport 'versor';\n\nd3.selection.prototype.map = function init(options) {\n  function createChart(el) {\n    const $sel = d3.select(el);\n    let data = $sel.datum();\n\n    data.usairports.forEach(d => {\n      d.incoming = 0;\n      d.outgoing = 0;\n      d.flights = [];\n    })\n    let iata = new Map(data.usairports.map(d => [d.IATA, d]))\n    data.usroutes.forEach(route => {\n      route.source = iata.get(route.ORIGIN);\n      route.target = iata.get(route.DEST);\n      route.source.outgoing += route.COUPONS;\n      route.target.incoming += route.COUPONS;\n    });\n    //data.usairports.sort((a, b) => d3.descending(a.outgoing, b.outgoing));\n    let airportsgeojson = data.usairports.map(airport => {\n      return {\n        type: \"Feature\",\n        properties: airport,\n        geometry: {\n          type: \"Point\",\n          coordinates: [airport.Longitude, airport.Latitude]\n        }\n      }\n    })\n    // dimension stuff\n    let width = 0;\n    let height = 0;\n    let scale = 0;\n    let hypotenuse = 0;\n\n    const marginTop = 0;\n    const marginBottom = 0;\n    const marginLeft = 0;\n    const marginRight = 0;\n\n    // scales\n    const scaleX = null;\n    const scaleY = null;\n    let radiusScale = d3.scaleSqrt()\n    let segmentScale = d3.scaleLinear()\n\n\n    // dom elements\n    let $svg = null;\n    let $axis = null;\n    let $vis = null;\n\n    let airports = null;\n    let airportG = null;\n\n    let bundle = null;\n    let flights = null;\n    let flight = null;\n\n    let voronoiLayer = null;\n\n    let canvas = null;\n    let context = null;\n\n    let projection = d3.geoAlbersUsa();\n\n    let canvasPath = d3.geoPath();\n    let svgPath = d3.geoPath();\n\n    let polygons = geoVoronoi()\n      .polygons(airportsgeojson);\n\n    let layout = d3.forceSimulation();\n\n    let line = d3.line()\n      .curve(d3.curveBundle)\n      .x(airport => airport.x)\n      .y(airport => airport.y);\n    //let line = \n    \n    const rotate = [110, -40];\n\n\n    // helper functions\n\n    const Chart = {\n      // called once at start\n      init() {\n        $svg = $sel.append('svg');\n        const $g = $svg.append('g');\n\n        canvas = $sel.append(\"canvas\");\n        context = canvas.node().getContext(\"2d\");\n\n\n        // offset chart for margins\n        $g.attr('transform', `translate(${marginLeft}, ${marginTop})`);\n\n        // create axis\n        $axis = $svg.append('g').attr('class', 'g-axis');\n\n        // setup viz group\n        $vis = $g.append('g').attr('class', 'g-vis');\n        airports = $g.append('g').attr(\"class\", \"airports\");\n        voronoiLayer = $g.append('g').attr(\"class\", \"voronoi-layer\");\n        flights = $g.append('g').attr(\"class\", \"flights\");\n\n        Chart.resize();\n        Chart.render();\n      },\n      // on resize, update new dimensions\n      resize() {\n        // defaults to grabbing dimensions from container element\n        width = $sel.node().offsetWidth - marginLeft - marginRight;\n        height = $sel.node().offsetHeight - marginTop - marginBottom;\n        $svg\n          \t.attr('width', width + marginLeft + marginRight)\n          \t.attr('height', height + marginTop + marginBottom);\n\n        canvas\n            .attr('width', width + marginLeft + marginRight)\n            .attr('height', height + marginTop + marginBottom);\n        \n        hypotenuse = Math.sqrt(width * width + height * height);\n\n        let outgoingMax = d3.max(data.usairports, d => d['outgoing'])\n        radiusScale\n          .domain([0, outgoingMax])\n          .range([width/1000,width/75])\n        \n        // segmentScale\n        //   .domain([0, hypotenuse])\n        //   .range([1, 10])\n        \n        projection\n          .scale(width * 1.28)\n          .translate([width / 2, height / 2]);\n\n        canvasPath\n          .projection(projection)\n          .context(context);\n\n        svgPath\n          .projection(projection)\n\n        data.usairports.forEach(airport => {\n          let coords = projection([airport.Longitude, airport.Latitude]);\n          airport.x = coords[0];\n          airport.y = coords[1];\n        })\n        \n        //voronoi.extent([[0, 0], [width, height]]);\n          \n\n        return Chart;\n      },\n      // update scales and render chart\n      render() {\n        \n\n        context.clearRect(0, 0, width, height);\n\n        // context.beginPath();\n        // path(topojson.mesh(mapData, mapData.objects.states, (a, b) => a !== b));\n        // context.lineWidth = 0.5 / scale;\n        // context.strokeStyle = \"#000\";\n        // context.stroke();\n\n        context.beginPath();\n        canvasPath(topojson.feature(mapData, mapData.objects.states))\n        context.fillStyle = \"#f5f5f5\";\n        context.fill();\n\n        context.beginPath();\n        canvasPath(topojson.mesh(mapData, mapData.objects.states, (a, b) => a !== b));\n        context.lineWidth = 1 * width / 960;\n        context.strokeStyle = \"#fff\";\n        context.stroke();\n\n        \n          \n        // context.beginPath();\n        // canvasPath(topojson.feature(mapData, mapData.objects.roads));\n        // context.lineWidth = 0.5 * width/960;\n        // context.strokeStyle = '#fff';\n        // context.stroke();\n\n        // context.beginPath();\n        // canvasPath(topojson.feature(mapData, mapData.objects.urban));\n        // context.fillStyle = \"#d3d3d3\";\n        // context.fill();\n\n        airportG = airports.selectAll(\".airport-g\")\n          .data(data.usairports, d => d.IATA)\n          .join(\"g\")\n          .attr(\"class\", \"airport-g\")\n          .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n        \n        airportG.selectAll(\".airport\")\n          .data(d => [d])\n          .join(\"circle\")\n          .attr(\"class\", \"airport\")\n          .attr(\"r\", d => radiusScale(d.outgoing))\n          .each(function(d) {\n            d.bubble = this;\n          })\n\n        voronoiLayer.selectAll(\".airport-voronoi\")\n          .data(polygons.features)\n          .join(\"path\")\n          .attr(\"class\", \"airport-voronoi\")\n          .attr(\"d\", svgPath)\n          .on(\"mouseover\", d => {\n            //console.log(d)\n            let airport = d.properties.site.properties;\n            //console.log(airport.flights)\n            d3.select(airport.bubble)\n              .classed(\"highlight\", true);\n\n            d3.selectAll(airport.flights)\n              .classed(\"highlight\", true)\n              .raise();\n          })\n          .on(\"mouseout\", d => {\n            let airport = d.properties.site.properties;\n\n            d3.select(airport.bubble)\n              .classed(\"highlight\", false);\n\n            d3.selectAll(airport.flights)\n              .classed(\"highlight\", false);\n          })\n          //.data(d => voronoi.polygons())\n        // console.log(data.usroutes)\n        // bundle = generateSegments(data.usairports, data.usroutes)\n        flight = flights.selectAll(\".flight\")\n          .data(data.usroutes)\n          .join(\"path\")\n          // .attr(\"d\", d => {\n          //   let {x: sourceX, y: sourceY} = d.source;\n          //   let {x: targetX, y: targetY} = d.target\n          //   //console.log(sourceX)\n          //   // //let targetX = width * singerOffsetX;\n          //   // let sourceY = d.y + (d.category == 'parent' ? radius : -radius);\n          //   // let targetY = (height * singerOffsetY) + (d.category == 'parent' ? -singerRadius : singerRadius);\n          //   let dx = targetX - sourceX;\n          //   let dy = targetY - sourceY;\n          //   let dr = Math.sqrt(dx * dx + dy * dy);\n          //   return `M${sourceX},${sourceY}A${dr},${dr} 0 0,1 ${targetX},${targetY}`;\n          // })\n          .attr(\"d\", d => line([d.source, d.target]))\n          .attr(\"class\", d => {\n            //console.log(d)\n            return `flight`\n          })\n          .attr(\"data-origin\", d => d.ORIGIN)\n          .attr(\"data-dest\", d => d.DEST)\n          .attr(\"data-carrier\", d => d.OPERATING_CARRIER)\n          .each(function (d) {\n            // adds the path object to our source airport\n            // makes it fast to select outgoing paths\n            //console.log(d.sour)\n            d.source.flights.push(this);\n          });\n\n        // https://github.com/d3/d3-force\n        // layout\n        //   //.nodes(bundle.nodes)\n        //   .alphaDecay(0.1)\n        //   .force(\"charge\", d3.forceManyBody()\n        //     .strength(10)\n        //     .distanceMax(radiusScale.range()[1] * 2)\n        //   )\n        //   // edges want to be as short as possible\n        //   // prevents too much stretching\n        //   .force(\"link\", d3.forceLink()\n        //     .strength(0.7)\n        //     .distance(0)\n\n        //   )\n        //   .on(\"tick\", function (d) {\n        //     //console.log(flight.attr(\"d\"))\n        //     flight.attr(\"d\", line);\n        //   })\n        //   .on(\"end\", function (d) {\n        //     console.log(\"layout complete\");\n        //   });\n        // layout.nodes(data.usairports).force(\"link\").links(data.usroutes);\n        // console.log(bundle.nodes)\n        // console.log(bundle.links)\n        // console.log(bundle.paths)\n        //console.log(polygons)\n      // context.beginPath();\n      // path(topojson.feature(mapData, mapData.objects.roads));\n      // context.stroke();\n      // context.strokeStyle = '#fff';\n      // context.fillStyle = \"none\";\n      // context.fill();\n\n      // context.beginPath();\n      // path(topojson.feature(mapData, mapData.objects.world));\n      // context.stroke();\n      // context.fillStyle = '#fff';\n      // context.fill();\n\n        function generateSegments(nodes, links) {\n          // generate separate graph for edge bundling\n          // nodes: all nodes including control nodes\n          // links: all individual segments (source to target)\n          // paths: all segments combined into single path for drawing\n          let bundle = { nodes: [], links: [], paths: [] };\n\n          // make existing nodes fixed\n          bundle.nodes = nodes.map(function (d, i) {\n            d.fx = d.x;\n            d.fy = d.y;\n            return d;\n          });\n\n          links.forEach(function (d, i) {\n            // calculate the distance between the source and target\n            let length = distance(d.source, d.target);\n\n            // calculate total number of inner nodes for this link\n            let total = Math.round(segmentScale(length));\n\n            // create scales from source to target\n            let xscale = d3.scaleLinear()\n              .domain([0, total + 1]) // source, inner nodes, target\n              .range([d.source.x, d.target.x]);\n\n            let yscale = d3.scaleLinear()\n              .domain([0, total + 1])\n              .range([d.source.y, d.target.y]);\n\n            // initialize source node\n            let source = d.source;\n            let target = null;\n\n            // add all points to local path\n            let local = [source];\n\n            for (let j = 1; j <= total; j++) {\n              // calculate target node\n              target = {\n                x: xscale(j),\n                y: yscale(j)\n              };\n\n              local.push(target);\n              bundle.nodes.push(target);\n\n              bundle.links.push({\n                source: source,\n                target: target\n              });\n\n              source = target;\n            }\n\n            local.push(d.target);\n\n            // add last link to target node\n            bundle.links.push({\n              source: target,\n              target: d.target\n            });\n\n            bundle.paths.push(local);\n          });\n\n          return bundle;\n        }\n\t\t\n\n        return Chart;\n      },\n      // get / set data\n      data(val) {\n        if (!arguments.length) return data;\n        data = val;\n        $sel.datum(data);\n        Chart.resize();\n        Chart.render();\n        return Chart;\n      }\n    };\n    Chart.init();\n\n    return Chart;\n  }\n\n  // create charts\n  const charts = this.nodes().map(createChart);\n  return charts.length > 1 ? charts : charts.pop();\n};\n\n\n\nfunction distance(source, target) {\n  var dx2 = Math.pow(target.x - source.x, 2);\n  var dy2 = Math.pow(target.y - source.y, 2);\n\n  return Math.sqrt(dx2 + dy2);\n}","import { pymLoader } from '../embeds/pym';\nimport {\n  select,\n  selectAll,\n  datum\n} from 'd3-selection';\nimport { debounce } from 'lodash';\nimport data from '../../../data/data.json';\nimport '../map';\n\n// a reference to the default graphic container, change if needed\nconst container = select('#graphic');\n\n// a helper function to clear the container of its contents\nconst clearContainer = () => container.html('');\n\n// a helper function to grab the container's width\nconst getFrameWidth = () => container.node().offsetWidth;\nconst routes = data.usroutes;\nconst origins = data.origins;\nconst airports = data.usairports;\nconsole.log(data)\nconsole.log(airports)\nconst destinations = data.destinations;\n\nlet mapChart = null;\nlet card = null;\nlet carrier = null;\nlet origin = null;\nlet destination = null;\nlet selectedRoutes = null;\n\nlet possibleCarriers = null;\nlet possibleOrigins = null;\nlet possibleDestinations = null;\nlet possibleAirports = null;\n\nconst blankCarrier = {'REPORTING_CARRIER': '---', 'Name': '---'};\nconst blankAirport = {'Name': '---', 'City': '---', 'IATA': '---'};\n\nconst resize = () => {\n    mapChart.resize();\n    mapChart.render();\n}\n\n/**\n * This function is called to render a graphic by Pym.js. The frame's width and\n * a reference to the Pym instance is provided.\n *\n * @param  {Object} pymChild         A reference to the iframe's Pym instance\n * @return {void}\n */\nexport default function renderGraphic(pymChild) {\n  // uncomment these two lines if you're creating a coded graphic\n  clearContainer(); // clears the container\n  const frameWidth = getFrameWidth(); // calcuates the width on each render\n  console.log(data);\n  mapChart = select(\"#graphic\").datum(data).map();\n  window.addEventListener('resize', debounce(resize, 150));\n\n}\n\npymLoader(renderGraphic).catch(console.error);\n\nconst cardDropdown = document.getElementById('card-dropdown');\nconst carrierDropdown = document.getElementById('carrier-dropdown');\nconst originDropdown = document.getElementById('origin-dropdown');\nconst destinationDropdown = document.getElementById('destination-dropdown');\n\n// add change listener\ncardDropdown.addEventListener('change', event => {\n\n  const value = event.target.value;\n\n  // find the element that matches (value has # in it, so use querySelector instead)\n  //const match = document.querySelector(value);\n});\n\ncarrierDropdown.addEventListener('change', event => {\n\n  const el = event.target;\n  const value = el.value;\n  carrier = value;\n  console.log(carrier)\n  selectedRoutes = routes.filter(d => (origin != null ? d['ORIGIN'] == origin : true) &&\n    (destination != null ? d['DEST'] == destination : true) &&\n    (carrier != null ? d['OPERATING_CARRIER'] == carrier : true));\n\n  data.usroutes = selectedRoutes;\n  \n\n  possibleOrigins = [...new Set(selectedRoutes.map(d => d.ORIGIN))];\n  possibleDestinations = [...new Set(selectedRoutes.map(d => d.DEST))];\n  possibleAirports = [...possibleOrigins, ...possibleDestinations];\n\nconsole.log(airports)\n  data.origins = airports.filter(d => possibleOrigins.includes(d['IATA']));\n  data.destinations = destinations.filter(d => possibleDestinations.includes(d['IATA']));\n  data.usairports = airports.filter(d => possibleAirports.includes(d['IATA']));\n\n  // console.log(possibleOrigins)\n  // console.log(possibleDestinations)\n  console.log([blankAirport, ...data.origins])\n  select(originDropdown).selectAll(\"option\")\n    .data([blankAirport, ...data.origins])\n    .join(\n      enter => enter.append(\"option\")\n        .attr(\"value\", d => {\n          console.log(d)\n          return d.IATA\n        })\n        .text(d => d.Name),\n      update => update\n        .attr(\"value\", d => d.IATA)\n        .text(d => d.Name),\n      exit => exit\n        .remove()\n    );\n\n  \n  select(destinationDropdown).selectAll(\"option\")\n    .data([blankAirport, ...data.destinations])\n    .join(\n      enter => enter.append(\"option\")\n        .attr(\"value\", d => d.IATA)\n        .text(d => d.Name),\n      update => update\n        .attr(\"value\", d => d.IATA)\n        .text(d => d.Name),\n      exit => exit\n        .remove()\n      );\n\n\n  \n  mapChart.data(data);\n  // find the element that matches (value has # in it, so use querySelector instead)\n  //const match = document.querySelector(value);\n});\n\noriginDropdown.addEventListener('change', event => {\n  \n  const el = event.target;\n  const value = el.value;\n  origin = value;\n\n  selectedRoutes = routes.filter(d => (origin != null ? d['ORIGIN'] == origin : true) && \n  (destination != null ? d['DEST'] == destination : true) &&\n  (carrier!= null ? d['OPERATING_CARRIER'] == carrier : true));\n\n  data.usroutes = selectedRoutes;\n  \n  mapChart.data(data);\n  \n  // find the element that matches (value has # in it, so use querySelector instead)\n  //const match = document.querySelector(value);\n});\n\ndestinationDropdown.addEventListener('change', event => {\n\n  const el = event.target;\n  const value = el.value;\n  destination = value;\n\n  selectedRoutes = routes.filter(d => (origin != null ? d['ORIGIN'] == origin : true) &&\n    (destination != null ? d['DEST'] == destination : true) &&\n    (carrier != null ? d['OPERATING_CARRIER'] == carrier : true));\n  \n  data.usroutes = selectedRoutes;\n  \n  mapChart.data(data);\n});","export default function debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n\n  var later = function() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function() {\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n}\n","/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.2.20171210\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif ('document' in self) {\n  // Full polyfill for browsers with no classList support\n  // Including IE < Edge missing SVGElement.classList\n  if (\n    !('classList' in document.createElement('_')) ||\n    (document.createElementNS &&\n      !(\n        'classList' in\n        document.createElementNS('http://www.w3.org/2000/svg', 'g')\n      ))\n  ) {\n    (function(view) {\n      'use strict';\n\n      if (!('Element' in view)) return;\n\n      var classListProp = 'classList',\n        protoProp = 'prototype',\n        elemCtrProto = view.Element[protoProp],\n        objCtr = Object,\n        strTrim =\n          String[protoProp].trim ||\n          function() {\n            return this.replace(/^\\s+|\\s+$/g, '');\n          },\n        arrIndexOf =\n          Array[protoProp].indexOf ||\n          function(item) {\n            var i = 0,\n              len = this.length;\n            for (; i < len; i++) {\n              if (i in this && this[i] === item) {\n                return i;\n              }\n            }\n            return -1;\n          },\n        // Vendors: please allow content code to instantiate DOMExceptions\n        DOMEx = function(type, message) {\n          this.name = type;\n          this.code = DOMException[type];\n          this.message = message;\n        },\n        checkTokenAndGetIndex = function(classList, token) {\n          if (token === '') {\n            throw new DOMEx('SYNTAX_ERR', 'The token must not be empty.');\n          }\n          if (/\\s/.test(token)) {\n            throw new DOMEx(\n              'INVALID_CHARACTER_ERR',\n              'The token must not contain space characters.'\n            );\n          }\n          return arrIndexOf.call(classList, token);\n        },\n        ClassList = function(elem) {\n          var trimmedClasses = strTrim.call(elem.getAttribute('class') || ''),\n            classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : [],\n            i = 0,\n            len = classes.length;\n          for (; i < len; i++) {\n            this.push(classes[i]);\n          }\n          this._updateClassName = function() {\n            elem.setAttribute('class', this.toString());\n          };\n        },\n        classListProto = (ClassList[protoProp] = []),\n        classListGetter = function() {\n          return new ClassList(this);\n        };\n      // Most DOMException implementations don't allow calling DOMException's toString()\n      // on non-DOMExceptions. Error's toString() is sufficient here.\n      DOMEx[protoProp] = Error[protoProp];\n      classListProto.item = function(i) {\n        return this[i] || null;\n      };\n      classListProto.contains = function(token) {\n        return ~checkTokenAndGetIndex(this, token + '');\n      };\n      classListProto.add = function() {\n        var tokens = arguments,\n          i = 0,\n          l = tokens.length,\n          token,\n          updated = false;\n        do {\n          token = tokens[i] + '';\n          if (!~checkTokenAndGetIndex(this, token)) {\n            this.push(token);\n            updated = true;\n          }\n        } while (++i < l);\n\n        if (updated) {\n          this._updateClassName();\n        }\n      };\n      classListProto.remove = function() {\n        var tokens = arguments,\n          i = 0,\n          l = tokens.length,\n          token,\n          updated = false,\n          index;\n        do {\n          token = tokens[i] + '';\n          index = checkTokenAndGetIndex(this, token);\n          while (~index) {\n            this.splice(index, 1);\n            updated = true;\n            index = checkTokenAndGetIndex(this, token);\n          }\n        } while (++i < l);\n\n        if (updated) {\n          this._updateClassName();\n        }\n      };\n      classListProto.toggle = function(token, force) {\n        var result = this.contains(token),\n          method = result\n            ? force !== true && 'remove'\n            : force !== false && 'add';\n\n        if (method) {\n          this[method](token);\n        }\n\n        if (force === true || force === false) {\n          return force;\n        } else {\n          return !result;\n        }\n      };\n      classListProto.replace = function(token, replacement_token) {\n        var index = checkTokenAndGetIndex(token + '');\n        if (~index) {\n          this.splice(index, 1, replacement_token);\n          this._updateClassName();\n        }\n      };\n      classListProto.toString = function() {\n        return this.join(' ');\n      };\n\n      if (objCtr.defineProperty) {\n        var classListPropDesc = {\n          get: classListGetter,\n          enumerable: true,\n          configurable: true,\n        };\n        try {\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n        } catch (ex) {\n          // IE 8 doesn't support enumerable:true\n          // adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n          // modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n          if (ex.number === undefined || ex.number === -0x7ff5ec54) {\n            classListPropDesc.enumerable = false;\n            objCtr.defineProperty(\n              elemCtrProto,\n              classListProp,\n              classListPropDesc\n            );\n          }\n        }\n      } else if (objCtr[protoProp].__defineGetter__) {\n        elemCtrProto.__defineGetter__(classListProp, classListGetter);\n      }\n    })(self);\n  }\n\n  // There is full or partial native classList support, so just check if we need\n  // to normalize the add/remove and toggle APIs.\n\n  (function() {\n    'use strict';\n\n    var testElement = document.createElement('_');\n\n    testElement.classList.add('c1', 'c2');\n\n    // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n    // classList.remove exist but support only one argument at a time.\n    if (!testElement.classList.contains('c2')) {\n      var createMethod = function(method) {\n        var original = DOMTokenList.prototype[method];\n\n        DOMTokenList.prototype[method] = function(token) {\n          var i,\n            len = arguments.length;\n\n          for (i = 0; i < len; i++) {\n            token = arguments[i];\n            original.call(this, token);\n          }\n        };\n      };\n      createMethod('add');\n      createMethod('remove');\n    }\n\n    testElement.classList.toggle('c3', false);\n\n    // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n    // support the second argument.\n    if (testElement.classList.contains('c3')) {\n      var _toggle = DOMTokenList.prototype.toggle;\n\n      DOMTokenList.prototype.toggle = function(token, force) {\n        if (1 in arguments && !this.contains(token) === !force) {\n          return force;\n        } else {\n          return _toggle.call(this, token);\n        }\n      };\n    }\n\n    // replace() polyfill\n    if (!('replace' in document.createElement('_').classList)) {\n      DOMTokenList.prototype.replace = function(token, replacement_token) {\n        var tokens = this.toString().split(' '),\n          index = tokens.indexOf(token + '');\n        if (~index) {\n          tokens = tokens.slice(index);\n          this.remove.apply(this, tokens);\n          this.add(replacement_token);\n          this.add.apply(this, tokens.slice(1));\n        }\n      };\n    }\n\n    testElement = null;\n  })();\n}\n","'use strict';\n\nif (typeof Promise === 'undefined') {\n  window.Promise = require('promise-polyfill').default;\n}\n\n// Only polyfill fetch() if we're in a browser\nif (typeof window !== 'undefined') {\n  require('whatwg-fetch');\n}\n\n// Will use the native implementation if it's not bad\nObject.assign = require('object-assign');\n\n// Support for...of (a commonly used syntax feature that requires Symbols)\nrequire('core-js/es6/symbol');\n// support all of Map()\nrequire('core-js/es6/map');\n// support all of Set()\nrequire('core-js/es6/set');\n// Support iterable spread (...Set, ...Map)\nrequire('core-js/fn/array/from');\n\n// This is available locally because everyone who made one doesn't understand\n// npm, apparently\nrequire('./polyfills/classlist.js');\n\n// We depend on intersection-observer enough that it should just be assumed as necessary\nrequire('intersection-observer');\n"],"sourceRoot":""}